# XtQuant 比价监控项目

## 📁 项目结构

```
src/配对交易/
├── monitor_xtdata_ratio.py    # 主监控脚本
├── test_xtdata.py            # 接口测试脚本
├── run_monitor.py            # 快速启动脚本
├── config_example.py         # 配置文件示例
├── README.md                 # 使用说明
└── 项目说明.md               # 项目总结
```

## 🚀 快速开始

### 1. 安装依赖

```bash
# 激活虚拟环境
.\venv\Scripts\activate

# 安装依赖
pip install xtquant pandas numpy statsmodels colorama
```

### 2. 配置设置

```bash
# 复制配置文件
copy config_example.py config.py

# 编辑配置文件，填入您的 XtQuant Token
# 在 config.py 中设置 XTQUANT_TOKEN = "your_token_here"
```

### 3. 运行监控

```bash
# 方法1: 使用快速启动脚本（推荐）
python run_monitor.py

# 方法2: 直接运行主脚本
python monitor_xtdata_ratio.py

# 方法3: 先测试接口
python test_xtdata.py
```

## 📊 功能特点

### 核心功能
- ✅ **多对子监控**: 支持8种不同类型的金融对子
- ✅ **实时统计**: Z-score、半衰期等统计指标计算
- ✅ **智能警告**: 阈值触发时彩色终端警告
- ✅ **数据持久化**: 结果自动保存到CSV文件
- ✅ **异常处理**: 完善的错误处理和重试机制

### 支持的对子类型
1. **指数对子**: 000300.SH/000852.SH (沪深300 vs 中证1000)
2. **ETF-指数**: 510500.SH/000905.SH (中证500ETF vs 指数)
3. **ETF-期货**: 518880.SH/AU0 (黄金ETF vs 期货)
4. **期货跨期**: CU0/CU1 (铜主力 vs 次主力)
5. **ETF-现货篮**: 支持ETF与现货篮的价差监控

### 技术优势
- 🔧 **XtQuant接口**: 使用专业的量化数据接口
- 📈 **高精度计算**: 40日滚动Z-score和OU半衰期
- 🎨 **彩色输出**: 直观的终端显示效果
- ⚙️ **灵活配置**: 支持配置文件自定义设置
- 🔄 **自动重试**: 网络异常时自动重试机制

## 📋 使用说明

### 配置文件说明

在 `config.py` 中可以配置：

```python
# Token设置
XTQUANT_TOKEN = "your_token_here"

# 监控对子
PAIRS_CONFIG = {
    "对子名": {"threshold": 阈值, "type": "对子类型"}
}

# 数据获取参数
DATA_CONFIG = {
    "start_date": "20150101",
    "min_data_points": 40
}
```

### 输出文件

- `ratio_monitor_xtdata.csv`: 监控结果数据
- `ratio_monitor_xtdata.log`: 详细运行日志

### 监控指标

| 指标 | 说明 |
|------|------|
| Z_score | 40日滚动Z-score |
| 半衰期 | OU模型半衰期（天） |
| 偏离方向 | A贵/B贵 |
| 数据点数 | 有效数据点数量 |

## ⚠️ 注意事项

### 使用前准备
1. **获取Token**: 需要有效的 XtQuant Token
2. **检查权限**: 确保有相应的数据访问权限
3. **网络环境**: 需要稳定的网络连接
4. **依赖安装**: 确保所有依赖包已正确安装

### 常见问题
1. **Token错误**: 检查Token是否正确设置
2. **数据获取失败**: 检查网络连接和数据权限
3. **配置问题**: 确保配置文件格式正确

## 🔧 开发说明

### 代码结构
- `monitor_xtdata_ratio.py`: 主监控逻辑
- `test_xtdata.py`: 接口测试和验证
- `run_monitor.py`: 用户友好的启动界面
- `config_example.py`: 配置文件模板

### 扩展开发
- 添加新的对子类型
- 自定义统计指标
- 增加数据源接口
- 优化性能表现

## 📈 版本历史

- **v1.0**: 基于 XtQuant xtdata 的初始版本
- 支持8种对子类型监控
- 完整的统计计算和警告机制
- 配置文件支持和错误处理

## 🤝 贡献指南

欢迎提交 Issue 和 Pull Request 来改进项目：

1. 报告 Bug 或提出新功能建议
2. 提交代码改进
3. 完善文档说明
4. 优化性能表现

## 📞 技术支持

如遇到问题，请：

1. 查看日志文件 `ratio_monitor_xtdata.log`
2. 运行测试脚本 `test_xtdata.py`
3. 检查配置文件设置
4. 确认网络连接和权限

---

**项目目标**: 为量化交易者提供专业、稳定、易用的比价监控工具，基于 XtQuant 强大的数据接口，实现多品种、多维度的价差监控和统计分析。
