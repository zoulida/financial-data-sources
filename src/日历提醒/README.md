# 日历提醒程序

## 功能说明

这个程序提供两个主要功能：

1. **本地日历事件提醒**：从 `日历2026.csv` 文件中读取并显示未来两周的重要事件
2. **AI智能分析**：通过OpenAI API获取未来两周可能影响A股市场的重要会议、政治、经济、金融事件

## 文件结构

```
src/日历提醒/
├── calendar_reminder.py    # 主程序文件
├── run_calendar.py        # 运行脚本
├── 日历2026.csv           # 日历事件数据
├── 日历类型.md            # 日历类型说明
├── requirements.txt       # 依赖包
└── README.md             # 说明文档
```

## 安装依赖

```bash
pip install -r requirements.txt
```

## 使用方法

### 方法1：直接运行主程序（推荐）
```bash
python calendar_reminder.py
```
**特点**：
- 🔒 稳定模式：低随机性，结果更一致
- 📊 扩展模式：不限数量，获取尽可能多的事件
- 📅 按日期排序：事件按时间顺序排列
- 📈 事件统计：显示获取的事件数量

### 方法2：使用运行脚本
```bash
python run_calendar.py
```

### 方法3：使用稳定版本（多种模式）
```bash
# 稳定模式
python calendar_reminder_stable.py --mode stable

# 创意模式
python calendar_reminder_stable.py --mode creative

# 平衡模式
python calendar_reminder_stable.py --mode balanced
```

### 方法4：使用扩展版本
```bash
python calendar_reminder_extended.py
```

## 程序特性

### 1. 本地日历事件
- 自动读取 `日历2026.csv` 文件
- 筛选未来14天的重要事件
- 按日期排序显示
- 包含事件名称和详细备注

### 2. AI智能分析
- 调用OpenAI API获取A股相关事件
- 分析行业会议、政治事件、经济数据发布
- 提供金融会议和产品发布会信息
- 评估对A股市场的潜在影响
- **新特性**：
  - 🔒 稳定输出：使用低随机性设置，结果更一致
  - 📊 不限数量：获取尽可能多的事件信息
  - 📅 按日期排序：事件按时间顺序排列
  - 📈 事件统计：自动统计获取的事件数量
  - 🎯 格式统一：使用标准格式显示事件信息

## 配置说明

### OpenAI API配置
程序使用以下配置：
- API地址：`https://api.laozhang.ai/v1`
- Token：`sk-bjBm3sO5lEzdzWKM615e8fB7D7B842708b1e250695Df3b11`
- 模型：`gpt-3.5-turbo`

### 日历数据格式
CSV文件应包含以下列：
- `日期`：事件日期（格式：YYYY-MM-DD）
- `事件`：事件名称
- `备注`：事件详细说明（可选）

## 输出示例

```
🚀 日历提醒程序启动
==================================================

📅 未来两周日历事件
==================================================
📆 2025-10-30 (Thursday)
   📌 港股通关闭
   💡 香港重阳节北向通道暂停

📆 2025-10-31 (Friday)
   📌 MSCI季度调样盘后锁定
   💡 被动资金尾盘调仓

🤖 正在查询OpenAI关于未来两周影响A股的重要事件...
==================================================
🔍 OpenAI分析结果：
[AI分析结果内容...]

✅ 程序执行完成
```

## 注意事项

1. 确保网络连接正常，以便调用OpenAI API
2. 日历文件路径正确且格式正确
3. 如遇到API调用失败，程序会显示错误信息但不会中断执行
4. 程序会自动处理时区和日期格式

## AI结果差异说明

### 为什么每次查询结果不同？

1. **AI模型随机性**：OpenAI的GPT模型具有内置随机性，模拟人类思维的多样性
2. **温度参数**：控制输出的随机性程度
   - `temperature=0.1`：低随机性，结果更稳定一致
   - `temperature=0.7`：中等随机性，平衡稳定性和创造性
   - `temperature=0.8`：高随机性，结果更有创意但变化较大
3. **时间敏感性**：每次运行的时间范围不同，AI会根据当前时间生成不同预测

### 解决方案

程序提供了三种模式：

**稳定模式** (`calendar_reminder_stable.py --mode stable`)
- 使用低随机性设置 (temperature=0.1)
- 结果更稳定一致
- 适合需要可预测结果的场景

**创意模式** (`calendar_reminder_stable.py --mode creative`)
- 使用高随机性设置 (temperature=0.8)
- 结果更有创意和多样性
- 适合需要不同视角分析的场景

**平衡模式** (`calendar_reminder_stable.py --mode balanced`)
- 使用中等随机性设置 (temperature=0.7)
- 平衡稳定性和创造性
- 默认推荐模式

## 错误处理

程序包含完善的错误处理机制：
- 文件读取错误
- 网络连接超时
- API调用失败
- 数据格式错误

所有错误都会显示友好的错误信息，不会导致程序崩溃。
