# Aè‚¡é€ƒé¡¶æ‰“åˆ†å™¨ v1.0.6 å®Œæ•´æ›´æ–°

## ğŸ¯ ç‰ˆæœ¬æ¦‚è¿°

v1.0.6 æ˜¯ä¸€ä¸ªé‡å¤§æ›´æ–°ç‰ˆæœ¬ï¼Œå¯¹é‡ä»·èƒŒç¦»å’Œä¼°å€¼ç™¾åˆ†ä½ä¸¤ä¸ªæ ¸å¿ƒæŒ‡æ ‡è¿›è¡Œäº†å…¨é¢ä¼˜åŒ–ï¼Œå¤§å¹…æå‡äº†é£é™©é¢„è­¦çš„æ•æ„Ÿåº¦å’Œå‡†ç¡®æ€§ã€‚

---

## ğŸ“Š æ ¸å¿ƒæ›´æ–°

### 1. é‡ä»·èƒŒç¦»è¯„åˆ†è§„åˆ™é‡æ„ â­â­â­

#### å˜æ›´å‰ (v1.0.5)
```python
# åªæœ‰èç¼©â‰¥20%æ‰è®¡åˆ†ï¼Œé˜¶æ¢¯å¼åŠ åˆ†
if divergence_days == 1:
    score = 1.0
elif divergence_days >= 2:
    score = 1.0 + (divergence_days - 1) * 0.5
```

#### å˜æ›´å (v1.0.6)
```python
# èç¼©â‰¥5%å°±è®¡åˆ†ï¼ŒæŒ‰å¹…åº¦è¿ç»­è®¡åˆ†
for æ¯æ—¥ in æœ€è¿‘5æ—¥:
    if æ”¶ç›˜æ¶¨ and é‡ç¼©ç‡ >= 20%:
        day_score = 1.0
    elif æ”¶ç›˜æ¶¨ and é‡ç¼©ç‡ >= 5%:
        day_score = 0.2 + (é‡ç¼©ç‡-0.05)/0.15 * 0.8
    total_score += day_score
```

#### è®¡åˆ†å…¬å¼
```
èç¼©ç‡ < 5%:     0åˆ†      (ä¸è®¡åˆ†)
èç¼©ç‡ = 5%:     0.2åˆ†    (åŸºç¡€åˆ†)
èç¼©ç‡ 5%-20%:   0.2 + (èç¼©ç‡-5%)/(20%-5%) * 0.8
èç¼©ç‡ â‰¥ 20%:    1.0åˆ†    (æ»¡åˆ†)
å¤šæ—¥å¾—åˆ†æ±‚å’Œ
```

#### ä¼˜åŠ¿å¯¹æ¯”

| ç‰¹æ€§ | v1.0.5 | v1.0.6 | æ”¹è¿› |
|------|--------|--------|------|
| èµ·å§‹é˜ˆå€¼ | 20% | **5%** â­ | æ›´æ—©é¢„è­¦ |
| è®¡åˆ†æ–¹å¼ | é˜¶æ¢¯å¼ | **è¿ç»­å¼** â­ | æ›´ç²¾ç»† |
| ç´¯è®¡æ–¹å¼ | å›ºå®šåŠ åˆ† | **æ±‚å’Œ** â­ | æ›´åˆç† |
| åˆ†æ•°èŒƒå›´ | 0-3åˆ† | **0-5åˆ†** â­ | æ›´å¤§åŒºåˆ†åº¦ |

#### å®é™…æ¡ˆä¾‹å¯¹æ¯”

| åœºæ™¯ | 5æ—¥èç¼©æƒ…å†µ | v1.0.5 | v1.0.6 | å·®å¼‚ |
|------|------------|--------|--------|------|
| è½»åº¦èƒŒç¦» | 3æ—¥èç¼©10% | 0åˆ† | **1.40åˆ†** | +1.40 â­ |
| ä¸­åº¦èƒŒç¦» | 2æ—¥èç¼©15%ï¼Œ1æ—¥25% | 1.5åˆ† | **2.47åˆ†** | +0.97 |
| é‡åº¦èƒŒç¦» | 5æ—¥èç¼©25% | 3.0åˆ† | **5.00åˆ†** | +2.00 |
| å®é™…æ¡ˆä¾‹ | 19.5%, 7.7%, 11.1% | 1.0åˆ† | **1.84åˆ†** | +0.84 |

---

### 2. ä¼°å€¼ç™¾åˆ†ä½è¯„åˆ†ä¼˜åŒ– â­â­

#### æ•°æ®æºå˜æ›´

**å˜æ›´å‰ (v1.0.5)**:
- æ•°æ®æº: akshare (å·²å¤±æ•ˆ)
- æŒ‡æ•°: ä¸Šè¯æŒ‡æ•°

**å˜æ›´å (v1.0.6)**:
- æ•°æ®æº: **Wind API** â­
- æŒ‡æ•°: **Windå…¨AæŒ‡æ•° (881001.WI)** â­

#### è¯„åˆ†è§„åˆ™å˜æ›´

**å˜æ›´å‰ (v1.0.5)**:
- ç™¾åˆ†ä½â‰¤80% â†’ 0åˆ†
- ç™¾åˆ†ä½80%-95% â†’ çº¿æ€§æ’å€¼
- ç™¾åˆ†ä½â‰¥95% â†’ 1åˆ†

**å˜æ›´å (v1.0.6)**:
- ç™¾åˆ†ä½â‰¤60% â†’ 0åˆ† â­
- ç™¾åˆ†ä½60%-95% â†’ çº¿æ€§æ’å€¼
- ç™¾åˆ†ä½â‰¥95% â†’ 1åˆ†

#### è®¡åˆ†å…¬å¼
```
ç™¾åˆ†ä½ < 60%:  0åˆ†
ç™¾åˆ†ä½ = 60%:  0åˆ†
ç™¾åˆ†ä½ 60%-95%: (ç™¾åˆ†ä½-60%)/(95%-60%)
ç™¾åˆ†ä½ â‰¥ 95%:  1åˆ†
```

#### ä¼˜åŠ¿å¯¹æ¯”

| é¡¹ç›® | v1.0.5 | v1.0.6 | æ”¹è¿› |
|------|--------|--------|------|
| æ•°æ®æº | akshare (å¤±æ•ˆ) | **Wind API** â­ | æ›´å¯é  |
| æŒ‡æ•° | ä¸Šè¯æŒ‡æ•° | **Windå…¨A** â­ | æ›´å…¨é¢ |
| ä¸‹é™é˜ˆå€¼ | 80% | **60%** â­ | æ›´æ—©é¢„è­¦ |

#### å¾—åˆ†å¯¹æ¯”è¡¨

| ç™¾åˆ†ä½ | v1.0.5 | v1.0.6 | å·®å¼‚ | è¯´æ˜ |
|-------|--------|--------|------|------|
| 50% | 0.00 | 0.00 | +0.00 | ç›¸åŒ |
| 60% | 0.00 | 0.00 | +0.00 | ç›¸åŒ |
| 70% | 0.00 | **0.29** | +0.29 | æ›´æ•æ„Ÿ â­ |
| 75% | 0.00 | **0.43** | +0.43 | æ›´æ•æ„Ÿ â­ |
| 80% | 0.00 | **0.57** | +0.57 | æ›´æ•æ„Ÿ â­ |
| 85% | 0.33 | **0.71** | +0.38 | æ›´æ•æ„Ÿ â­ |
| 90% | 0.67 | **0.86** | +0.19 | æ›´æ•æ„Ÿ â­ |
| 95% | 1.00 | 1.00 | +0.00 | ç›¸åŒ |

---

## ğŸ“ˆ æ€»åˆ†èŒƒå›´å˜åŒ–

### v1.0.5
- èèµ„ä½™é¢: 0-1.0åˆ†
- å¼€æˆ·æ•°: 0-1.5åˆ†
- é‡ä»·èƒŒç¦»: 0-3.0åˆ†
- ä¼°å€¼ç™¾åˆ†ä½: 0-1.0åˆ†
- **æ€»åˆ†èŒƒå›´: 0-6.5åˆ†**

### v1.0.6
- èèµ„ä½™é¢: 0-1.0åˆ†
- å¼€æˆ·æ•°: 0-1.5åˆ†
- é‡ä»·èƒŒç¦»: **0-5.0åˆ†** â­
- ä¼°å€¼ç™¾åˆ†ä½: 0-1.0åˆ†
- **æ€»åˆ†èŒƒå›´: 0-8.5åˆ†**

### é€ƒé¡¶é˜ˆå€¼å»ºè®®

| æ€»åˆ†èŒƒå›´ | é£é™©ç­‰çº§ | å»ºè®®æ“ä½œ | è¯´æ˜ |
|---------|---------|---------|------|
| < 2.2 | æ­£å¸¸ | ç»§ç»­æŒæœ‰ | åŸºç¡€é˜ˆå€¼ |
| 2.2-3.0 | è½»åº¦é£é™© | ä¿æŒè­¦æƒ• | æ³¨æ„è§‚å¯Ÿ |
| 3.0-4.0 | ä¸­åº¦é£é™© | è€ƒè™‘å‡ä»“ | å¼ºçƒˆè­¦å‘Š â­ |
| â‰¥ 4.0 | é«˜åº¦é£é™© | ç«‹å³å‡ä»“ | æåº¦å±é™© â­â­ |

---

## ğŸ§ª æµ‹è¯•å·¥å…·

### 1. é‡ä»·èƒŒç¦»è¯„åˆ†æµ‹è¯•

**æ–‡ä»¶**: `src/å¤§ç›˜é€ƒé¡¶/é‡ä»·èƒŒç¦»è¯„åˆ†æµ‹è¯•.py`

**åŠŸèƒ½**:
- âœ… å•æ—¥å¾—åˆ†æµ‹è¯•ï¼ˆ0%-30%å„ä¸ªèç¼©ç‡ï¼‰
- âœ… å¤šæ—¥ç´¯è®¡åœºæ™¯æµ‹è¯•ï¼ˆ5ä¸ªå…¸å‹åœºæ™¯ï¼‰
- âœ… æ–°æ—§è§„åˆ™å¯¹æ¯”
- âœ… å®é™…æ¡ˆä¾‹éªŒè¯

**è¿è¡Œ**:
```bash
python src/å¤§ç›˜é€ƒé¡¶/é‡ä»·èƒŒç¦»è¯„åˆ†æµ‹è¯•.py
```

### 2. Windä¼°å€¼æ•°æ®æµ‹è¯•

**æ–‡ä»¶**: `src/å¤§ç›˜é€ƒé¡¶/æµ‹è¯•Windä¼°å€¼.py`

**åŠŸèƒ½**:
- âœ… Wind APIè¿æ¥æµ‹è¯•
- âœ… Windå…¨AæŒ‡æ•°PEæ•°æ®è·å–
- âœ… ç™¾åˆ†ä½è®¡ç®—éªŒè¯
- âœ… æ–°æ—§è§„åˆ™å¯¹æ¯”

**è¿è¡Œ**:
```bash
python src/å¤§ç›˜é€ƒé¡¶/æµ‹è¯•Windä¼°å€¼.py
```

---

## ğŸ“ æ–‡æ¡£æ›´æ–°

### æ›´æ–°çš„æ–‡ä»¶

1. âœ… `escape_top_scorer.py` - ä¸»ç¨‹åºä»£ç 
2. âœ… `README.md` - é¡¹ç›®è¯´æ˜æ›´æ–°
3. âœ… `æ›´æ–°æ—¥å¿—.md` - æ·»åŠ v1.0.6è¯´æ˜
4. âœ… `v1.0.6æ›´æ–°è¯´æ˜.md` - é‡ä»·èƒŒç¦»è¯¦ç»†è¯´æ˜
5. âœ… `v1.0.6å®Œæ•´æ›´æ–°.md` - æœ¬æ–‡æ¡£

### æ–°å¢çš„æ–‡ä»¶

1. âœ… `é‡ä»·èƒŒç¦»è¯„åˆ†æµ‹è¯•.py` - æµ‹è¯•å·¥å…·
2. âœ… `æµ‹è¯•Windä¼°å€¼.py` - æµ‹è¯•å·¥å…·

---

## ğŸš€ ä½¿ç”¨ç¤ºä¾‹

### è¿è¡Œä¸»ç¨‹åº

```bash
python src/å¤§ç›˜é€ƒé¡¶/escape_top_scorer.py
```

### é¢„æœŸè¾“å‡º (v1.0.6)

```
======================================================================
Aè‚¡ç‰›å¸‚é€ƒé¡¶æ‰“åˆ†å™¨
è¿è¡Œæ—¶é—´: 2025-10-21 10:00:00
======================================================================

[1/4] æ­£åœ¨è·å–èèµ„ä½™é¢æ•°æ®...
  âœ“ Windæ•°æ®ï¼šæœ€è¿‘3æ—¥èèµ„å‡€ä¹°å…¥æƒ…å†µæ­£å¸¸ï¼Œå¾—åˆ†: 0.0
    æœ€è¿‘3æ—¥æ•°æ®: ['+123.45äº¿', '+89.67äº¿', '+45.23äº¿']

[2/4] æ­£åœ¨è·å–å¼€æˆ·æ•°æ•°æ®...
  âœ“ Windæ•°æ®ï¼š2025-09(158.32ä¸‡) â†’ 2025-10(162.45ä¸‡)
    ç¯æ¯”å˜åŒ–: +2.6% (é™å¹…: -2.6%)
    å¾—åˆ†: 0.00

[3/4] æ­£åœ¨è·å–é‡ä»·èƒŒç¦»æ•°æ®...
  âœ“ XtQuantæ•°æ®ï¼šæœ€è¿‘5æ—¥å‘ç° 3 æ—¥é‡ä»·èƒŒç¦»ï¼Œæ€»å¾—åˆ†: 1.84
    èƒŒç¦»è¯¦æƒ…: 20251015 (é‡ç¼©19.5%, +0.97åˆ†); 20251016 (é‡ç¼©7.7%, +0.34åˆ†); 20251020 (é‡ç¼©11.1%, +0.53åˆ†)

[4/4] æ­£åœ¨è·å–ä¼°å€¼ç™¾åˆ†ä½æ•°æ®...
  âœ“ Windæ•°æ®ï¼š2025-10-21 PE=22.45
    è¿‘1228ä¸ªäº¤æ˜“æ—¥ç™¾åˆ†ä½: 81.4%
    å¾—åˆ†: 0.61

======================================================================
2025-10-21 é€ƒé¡¶æ‰“åˆ†
èèµ„ä½™é¢: 0.0 | å¼€æˆ·æ•°: 0.0 | é‡ä»·èƒŒç¦»: 1.8 | ä¼°å€¼ç™¾åˆ†ä½: 0.6
æ€»åˆ†: 2.4/8.5
ã€âš ï¸  å¼ºçƒˆé€ƒé¡¶ä¿¡å·ï¼ã€‘
======================================================================
```

---

## âš ï¸ é‡è¦æç¤º

### 1. å¿…éœ€æ¡ä»¶

- âœ… Wind ç»ˆç«¯å·²å®‰è£…ã€è¿è¡Œå¹¶ç™»å½•
- âœ… å›½é‡‘ QMT å·²å®‰è£…ã€è¿è¡Œå¹¶ç™»å½•  
- âœ… æ•°æ®æ¨¡å—ï¼š`source/å®ç›˜/xuntou/datadownload/åˆå¹¶ä¸‹è½½æ•°æ®.py`

### 2. æ•°æ®æºä¾èµ–

| æŒ‡æ ‡ | æ•°æ®æº | æ˜¯å¦å¿…éœ€ |
|------|--------|---------|
| èèµ„ä½™é¢ | Wind API / ä¸œæ–¹è´¢å¯Œç½‘ | æœ‰å¤‡ç”¨ |
| å¼€æˆ·æ•° | Wind API | **å¿…éœ€** â­ |
| é‡ä»·èƒŒç¦» | XtQuant (`getDayData`) | **å¿…éœ€** â­ |
| ä¼°å€¼ç™¾åˆ†ä½ | Wind API | **å¿…éœ€** â­ |

### 3. å…¼å®¹æ€§è¯´æ˜

- âœ… v1.0.6 ä»£ç å‘åå…¼å®¹
- âš ï¸ å†å²CSVæ•°æ®åˆ†æ•°å«ä¹‰å·²å˜åŒ–
- âš ï¸ æ€»åˆ†èŒƒå›´ä»6.5åˆ†å˜ä¸º8.5åˆ†
- âš ï¸ å»ºè®®é‡æ–°ç”Ÿæˆå†å²è¶‹åŠ¿å›¾

---

## ğŸ“Š å‡çº§å»ºè®®

### ä» v1.0.5 å‡çº§åˆ° v1.0.6

#### 1. å¤‡ä»½æ•°æ®

```bash
# å¤‡ä»½å†å²æ•°æ®
cp src/å¤§ç›˜é€ƒé¡¶/escape_top_history.csv src/å¤§ç›˜é€ƒé¡¶/escape_top_history_v105_backup.csv

# å¤‡ä»½å›¾è¡¨
cp src/å¤§ç›˜é€ƒé¡¶/escape_top_chart.png src/å¤§ç›˜é€ƒé¡¶/escape_top_chart_v105_backup.png
```

#### 2. äº†è§£å˜åŒ–

- é‡ä»·èƒŒç¦»å¾—åˆ†å¯èƒ½æ˜¾è‘—æé«˜ï¼ˆ5%é˜ˆå€¼ï¼‰
- ä¼°å€¼ç™¾åˆ†ä½å¾—åˆ†å¯èƒ½æé«˜ï¼ˆ60%é˜ˆå€¼ï¼‰
- æ€»åˆ†èŒƒå›´æ‰©å¤§ï¼ˆ6.5â†’8.5ï¼‰

#### 3. è°ƒæ•´é˜ˆå€¼

- åŸºç¡€é˜ˆå€¼ä¿æŒ2.2åˆ†
- å¼ºçƒˆè­¦å‘Šé˜ˆå€¼è°ƒæ•´ä¸º3.0åˆ†
- æåº¦å±é™©é˜ˆå€¼è°ƒæ•´ä¸º4.0åˆ†

#### 4. æµ‹è¯•éªŒè¯

```bash
# æµ‹è¯•é‡ä»·èƒŒç¦»
python src/å¤§ç›˜é€ƒé¡¶/é‡ä»·èƒŒç¦»è¯„åˆ†æµ‹è¯•.py

# æµ‹è¯•ä¼°å€¼æ•°æ®
python src/å¤§ç›˜é€ƒé¡¶/æµ‹è¯•Windä¼°å€¼.py

# è¿è¡Œä¸»ç¨‹åº
python src/å¤§ç›˜é€ƒé¡¶/escape_top_scorer.py
```

---

## ğŸ‰ æ€»ç»“

v1.0.6 å¸¦æ¥äº†é‡å¤§æ”¹è¿›ï¼š

### é‡ä»·èƒŒç¦»
âœ… **æ›´æ•æ„Ÿ** - 5%å³é¢„è­¦ï¼ˆåŸ20%ï¼‰  
âœ… **æ›´ç²¾ç»†** - è¿ç»­è®¡åˆ†ï¼ˆåŸé˜¶æ¢¯å¼ï¼‰  
âœ… **æ›´åˆç†** - æŒ‰å¹…åº¦æ±‚å’Œï¼ˆåŸå›ºå®šåŠ åˆ†ï¼‰  
âœ… **æ›´å‡†ç¡®** - çœŸå®åæ˜ é£é™©ç¨‹åº¦  

### ä¼°å€¼ç™¾åˆ†ä½
âœ… **æ›´å¯é ** - Wind APIï¼ˆåŸakshareå¤±æ•ˆï¼‰  
âœ… **æ›´å…¨é¢** - Windå…¨AæŒ‡æ•°ï¼ˆåŸä¸Šè¯æŒ‡æ•°ï¼‰  
âœ… **æ›´æ—©é¢„è­¦** - 60%é˜ˆå€¼ï¼ˆåŸ80%ï¼‰  
âœ… **æ›´ç²¾ç¡®** - 5å¹´PEæ•°æ®å®Œæ•´  

### æ€»ä½“æå‡
âœ… é£é™©é¢„è­¦æ›´æ•æ„Ÿ  
âœ… æ•°æ®æºæ›´å¯é   
âœ… è¯„åˆ†æ›´ç²¾ç»†  
âœ… åŒºåˆ†åº¦æ›´å¤§  

**å¼ºçƒˆæ¨èæ‰€æœ‰ç”¨æˆ·å‡çº§åˆ° v1.0.6ï¼**

---

**ç‰ˆæœ¬**: v1.0.6  
**å‘å¸ƒæ—¥æœŸ**: 2025-10-21  
**é‡è¦ç¨‹åº¦**: â­â­â­â­â­  
**æ¨èå‡çº§**: å¼ºçƒˆæ¨è  
**å…¼å®¹æ€§**: å‘åå…¼å®¹ï¼ˆåˆ†æ•°å«ä¹‰æœ‰å˜åŒ–ï¼‰

